YUI.add("gallery-flickr",function(h){h.Flickr=function(){function l(a,d){if(a){d||(d="s");return{img:"http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_"+d+".jpg",imgLarge:"http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_z.jpg",url:"http://www.flickr.com/photos/"+a.owner+"/"+a.id,title:a.title}}}return{get:function(a,d){a=a||{};var c;c=a.results||25;var f,e,g;f=a.search?'text="'+a.search+'"':"";e=a.lat&&a.lon?" and woe_id in (select place.woeid from flickr.places where lat="+
a.lat+" and lon="+a.lon+') and radius_units="mi"':"";g=a.getRecent?' and sort="date-posted-desc"':' and sort="interestingness-desc"';c=f?"select * from flickr.photos.search("+c+") where "+f+e+g:!f&&e?"select * from flickr.photos.search("+c+") where "+e.substr(5,e.length-5)+g:"select * from flickr.photos.recent("+c+")";h.YQL(c,function(b){if(b.error||!b.query){alert("YQL query error :( ("+b.error.description+")");b=void 0}else if(b.query.results){var i,j=b.query.results.photo,k=[];b=0;for(i=j.length;b<
i;b++)k.push(l(j[b]));b=k}else{alert("No results :(");b=void 0}d(b)})}}}()},"1.0",{requires:["yql"]});